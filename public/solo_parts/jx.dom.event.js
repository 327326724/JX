(function(){var j=this,f=j.Jx,r={},x={},t={NO_DEBUG:0,SHOW_ALL:1},q={debug:1},u=function(k,v,s){k=String(k);if(q.debug)if(this.console)this.console.out?this.console.out(k,v,s):alert(k+" - \u6d88\u606f\u7c7b\u578b["+s+"]");return k};try{if(typeof f==="undefined"||f.mark&&f.mark==="JxMark"){if(f){r=f.VERSIONS;x=f.PACKAGES}f=function(k,v){var s=this;if(v)this._init();else if(k){k=String(k);try{if(f.VERSIONS[k])s=f.VERSIONS[k];else{s=f.VERSIONS[f.DEFAULT_VERSION];throw Error("\u6ca1\u6709\u627e\u5230 JET version "+
k+", \u6240\u4ee5\u8fd4\u56de\u9ed8\u8ba4\u7248\u672c JET version "+f.DEFAULT_VERSION+"!");}}catch(o){s.out("A.\u9519\u8bef\uff1a["+o.name+"] "+o.message+", "+o.fileName+", \u884c\u53f7:"+o.lineNumber+"; stack:"+typeof o.stack,2)}}else s=f.VERSIONS[f.DEFAULT_VERSION];return s};f.prototype={version:"1.0",DEBUG:t,option:q,_init:function(){this.constructor=f},$namespace:function(k){var v,s=k.split("."),o=window;for(k=0;k<s.length;k+=1){v=s[k];o[v]=o[v]||{};o=o[s[k]]}return o},$package:function(){var k=
arguments[0],v=arguments[arguments.length-1],s=j;if(typeof v==="function"){if(typeof k==="string"){s=this.$namespace(k);f.PACKAGES[k]||(f.PACKAGES[k]={isLoaded:true,returnValue:void 0});s.packageName=k}else if(typeof k==="object")s=k;v.call(s,this)}else throw Error("Function required");},checkPackage:function(k){return f.PACKAGES[k]},out:u,debug:function(){},profile:function(){},warn:function(){},error:function(){},startTime:+new Date,about:function(){return this.out("JET (Javascript Extend Tools)\nversion: "+
this.version+"\n\nCopyright (c) 2009, All rights reserved.")},toString:function(){return"JET version "+this.version+" !"}};f.VERSIONS=r;f.PACKAGES=x;f.VERSIONS["1.0"]=new f("1.0",true);f.DEFAULT_VERSION="1.0";f.mark="JxMark";j.Jet=j.Jx=f}else throw Error('"Jx" name is defined in other javascript code !!!');}catch(l){u("JET \u5fae\u5185\u6838\u521d\u59cb\u5316\u5931\u8d25! B.\u9519\u8bef\uff1a["+l.name+"] "+l.message+", "+l.fileName+", \u884c\u53f7:"+l.lineNumber+"; stack:"+typeof l.stack,1)}})();
Jx().$package(function(j){var f,r,x,t,q,u,l,k,v,s,o;f=function(a){return typeof a==="undefined"};r=function(a){return a===null};x=function(a){return(a===0||a)&&a.constructor===Number};q=function(a){return(a===false||a)&&a.constructor===Boolean};t=function(a){return(a===""||a)&&a.constructor===String};u=function(a){return a&&a.constructor===Object||String(a)==="[object Object]"};l=function(a){return a&&a.constructor===Array||Object.prototype.toString.call(a)==="[object Array]"};k=function(a){return a&&
a.callee&&x(a.length)?true:false};v=function(a){return a&&a.constructor===Function};s=function(a){var b=arguments,e,c;if(b.length===1){a=this;b=0}else{a=b[0]||{};b=1}for(;b<arguments.length;b++){c=arguments[b];for(e in c){var g=a[e],i=c[e];if(g!==i)if(i&&u(i)&&!l(i)&&!i.nodeType&&!v(i)){g=a[e]||{};a[e]=s(g,i||(i.length!=null?[]:{}))}else if(i!==undefined)a[e]=i}}return a};o=function(){var a=arguments.length,b=arguments[a-1];b.init=b.init||function(){};if(a===2){a=arguments[0].extend;var e=function(){};
e.prototype=a.prototype;var c=function(){this.init.apply(this,arguments)};c.superClass=a.prototype;c.callSuper=function(g,i){var m=Array.prototype.slice,y=m.call(arguments,2);(i=c.superClass[i])&&i.apply(g,y.concat(m.call(arguments)))};c.prototype=new e;c.prototype.constructor=c;j.extend(c.prototype,b);c.prototype.init=function(){b.init.apply(this,arguments)};return c}else if(a===1){a=function(){return this.init.apply(this,arguments)};a.prototype=b;return a}};var p=new o({init:function(a,b,e,c,g){var i=
a.concat();if(c)i=a;this.timeout=window.setTimeout(function(){var m=+new Date;do b.call(e,i.shift());while(i.length>0&&+new Date-m<50);if(i.length>0)this.timeout=window.setTimeout(arguments.callee,25);else g&&g(a)},25)},stop:function(){clearTimeout(this.timeout)}});j.isUndefined=f;j.isNull=r;j.isNumber=x;j.isString=t;j.isBoolean=q;j.isObject=u;j.isArray=l;j.isArguments=k;j.isFunction=v;j.$typeof=function(a){return f(a)?"undefined":r(a)?"null":x(a)?"number":q(a)?"boolean":t(a)?"string":u(a)?"object":
l(a)?"array":k(a)?"arguments":v(a)?"function":"other"};j.$return=function(a){return j.isFunction(a)?a:function(){return a}};j.$try=function(){var a,b=arguments.length,e;for(a=0;a<b;a++)try{e=arguments[a]();break}catch(c){j.out("C.\u9519\u8bef\uff1a["+c.name+"] "+c.message+", "+c.fileName+", \u884c\u53f7:"+c.lineNumber+"; stack:"+typeof c.stack,2)}return e};j.emptyFunc=function(){};j.clone=function(a){var b=function(){};b.prototype=a;return new b};j.getLength=function(a){var b,e=0;for(b in a)a.hasOwnProperty(b)&&
e++;return e};j.checkJSON=function(){return true};j.random=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)};j.extend=s;j.now=function(){return+new Date};j.timedChunk=function(a,b,e,c,g){var i=a.concat();if(c)i=a;window.setTimeout(function(){var m=+new Date;do b.call(e,i.shift());while(i.length>0&&+new Date-m<50);if(i.length>0)window.setTimeout(arguments.callee,25);else g&&g(a)},25)};j.rebuild=function(a,b){b=b||{};a.$$rebuildedFunc=a.$$rebuildedFunc||function(){var e,c;e=b.contextObj||this;
c=Array.prototype.slice.call(arguments,0);if(c!==undefined)c=c.concat(b.arguments);if(b.event===false)c=c.slice(1);return a.apply(e,c)};return a.$$rebuildedFunc};j.pass=function(a){var b=Array.prototype.slice,e=b.call(arguments,1);return function(){return a.apply(this,e.concat(b.call(arguments)))}};j.bind=function(a,b){var e=Array.prototype.slice,c=e.call(arguments,2);return function(){return a.apply(b,c.concat(e.call(arguments)))}};j.bindNoEvent=void 0;j.Class=o;j.Chunk=p});
Jx().$package(function(j){j.array=j.array||{};var f=j.array,r,x,t,q,u,l,k,v,s,o,p,a;r=Array.prototype.indexOf?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.indexOf.apply(arguments[0],b)}:function(b,e,c){if(c==null)c=0;else if(c<0)c=Math.max(0,b.length+c);for(c=c;c<b.length;c++)if(b[c]===e)return c;return-1};x=Array.prototype.lastIndexOf?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.lastIndexOf.apply(arguments[0],b)}:function(b,e,
c){if(c==null)c=b.length-1;else if(c<0)c=Math.max(0,b.length+c);for(c=c;c>=0;c--)if(b[c]===e)return c;return-1};t=Array.prototype.forEach?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.forEach.apply(arguments[0],b)}:function(b,e,c){var g=b.length;if(typeof e!="function")throw new TypeError;for(var i=0;i<g;i++)i in b&&e.call(c,b[i],i,b)};q=Array.prototype.filter?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.filter.apply(arguments[0],
b)}:function(b,e,c){var g=b.length;if(typeof e!="function")throw new TypeError;for(var i=[],m=0;m<g;m++)if(m in b){var y=b[m];e.call(c,y,m,b)&&i.push(y)}return i};u=Array.prototype.some?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.some.apply(arguments[0],b)}:function(b,e,c){var g=b.length;if(typeof e!="function")throw new TypeError;for(var i=0;i<g;i++)if(i in b&&e.call(c,b[i],i,b))return true;return false};l=Array.prototype.map?function(){var b=Array.prototype.slice.call(arguments,
1);return Array.prototype.map.apply(arguments[0],b)}:function(b,e,c){var g=b.length;if(typeof e!="function")throw new TypeError;for(var i=Array(g),m=0;m<g;m++)if(m in b)i[m]=e.call(c,b[m],m,b);return i};k=Array.prototype.every?function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.every.apply(arguments[0],b)}:function(b,e,c){var g=b.length;if(typeof e!="function")throw new TypeError;for(var i=0;i<g;i++)if(i in b&&!e.call(c,b[i],i,b))return false;return true};v=Array.prototype.reduce?
function(){var b=Array.prototype.slice.call(arguments,1);return Array.prototype.reduce.apply(arguments[0],b)}:function(b,e){var c=b.length>>>0;if(typeof e!="function")throw new TypeError;if(c==0&&arguments.length==2)throw new TypeError;var g=0;if(arguments.length>=3)var i=arguments[2];else{do{if(g in b){i=b[g++];break}if(++g>=c)throw new TypeError;}while(1)}for(;g<c;g++)if(g in b)i=e.call(null,i,b[g],g,b);return i};s=Array.prototype.reduceRight?function(){var b=Array.prototype.slice.call(arguments,
1);return Array.prototype.reduceRight.apply(arguments[0],b)}:function(b,e){var c=b.length>>>0;if(typeof e!="function")throw new TypeError;if(c==0&&arguments.length==2)throw new TypeError;c=c-1;if(arguments.length>=3)var g=arguments[2];else{do{if(c in b){g=b[c--];break}if(--c<0)throw new TypeError;}while(1)}for(;c>=0;c--)if(c in b)g=e.call(null,g,b[c],c,b);return g};o=function(b){var e=j.$typeof(b);return e?e!="array"&&e!="arguments"?[b]:b:[]};p=function(b,e){return r(b,e)>-1};a=function(b){for(var e=
[],c=0,g=b.length;c<g;c++)p(e,b[c])||e.push(b[c]);return e};f.indexOf=r;f.lastIndexOf=x;f.forEach=t;f.filter=q;f.some=u;f.map=l;f.every=k;f.reduce=v;f.reduceRight=s;f.toArray=o;f.remove=function(b,e){e=o(e);var c,g,i=false;for(c=0;c<e.length;c++)for(g=0;g<b.length;g++)if(b[g]===e[c]){b.splice(g,1);i=true}return i};f.replace=function(b,e,c){for(;0<b.length;ij++)if(b[0]===e){b[0]=c;return true}return false};f.bubbleSort=function(b,e){e=e||function(A,w){return A-w};for(var c=b.length,g,i,m=0;m<c-1;m++){i=
false;for(var y=c-1;y>m;y--)if(e(b[y],b[y-1])<0){i=true;g=b[y-1];b[y-1]=b[y];b[y]=g}if(!i)break}return b};f.binarySearch=function(b,e,c){for(var g=0,i=b.length,m=Math.floor(b.length/2);i!=m;){if(c(e,b[m])>0)g=m+1;else i=m;m=Math.floor((g+i)/2)}return m};f.contains=p;f.uniquelize=a;f.intersect=function(b,e){for(var c=[],g=0,i=b.length;g<i;g++)p(e,b[g])&&c.push(b[g]);return c};f.minus=function(b,e){for(var c=[],g=0,i=b.length;g<i;g++)p(e,b[g])||c.push(b[g]);return c};f.union=function(b,e){return a(b.concat(e))}});
Jx().$package(function(j){j.browserOptions={adjustBehaviors:true,htmlClass:true};j.host=window.location.host;var f=navigator.platform.toLowerCase(),r=navigator.userAgent.toLowerCase(),x=navigator.plugins,t,q,u,l,k;l=function(o,p){o=(""+o).replace(/_/g,".");p=p||1;o=String(o).split(".");o=o[0]+"."+(o[1]||"0");return o=Number(o).toFixed(p)};t={getPlatform:function(){return f},name:window.orientation!=undefined?"iPod":(f.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,
win:0,linux:0,mac:0,set:function(o,p){this.name=o;this.version=p;this[o]=p}};t[t.name]=true;(k=r.match(/windows ([\d.]+)/))?t.set("win",l(k[1])):(k=r.match(/windows nt ([\d.]+)/))?t.set("win",l(k[1])):(k=r.match(/linux ([\d.]+)/))?t.set("linux",l(k[1])):(k=r.match(/mac ([\d.]+)/))?t.set("mac",l(k[1])):(k=r.match(/ipod ([\d.]+)/))?t.set("iPod",l(k[1])):(k=r.match(/ipad[\D]*os ([\d_]+)/))?t.set("iPad",l(k[1])):(k=r.match(/iphone ([\d.]+)/))?t.set("iPhone",l(k[1])):(k=r.match(/android ([\d.]+)/))&&t.set("android",
l(k[1]));q={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},getPlugins:function(){return x},plugins:{flash:function(){var o=0;if(x&&x.length){var p=x["Shockwave Flash"];if(p&&p.description)o=l(p.description.match(/\b(\d+)\.\d+\b/)[1],1)||o}else for(p=13;p--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+p);o=l(p);break}catch(a){}return o}()},getUserAgent:function(){return r},name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,
adobeAir:0,set:function(o,p){this.name=o;this.version=p;this[o]=p}};(k=r.match(/msie ([\d.]+)/))?q.set("ie",l(k[1])):(k=r.match(/firefox\/([\d.]+)/))?q.set("firefox",l(k[1])):(k=r.match(/chrome\/([\d.]+)/))?q.set("chrome",l(k[1])):(k=r.match(/opera.([\d.]+)/))?q.set("opera",l(k[1])):(k=r.match(/adobeair\/([\d.]+)/))?q.set("adobeAir",l(k[1])):(k=r.match(/version\/([\d.]+).*safari/))&&q.set("safari",l(k[1]));(k=r.match(/version\/([\d.]+).*mobile.*safari/))&&q.set("mobileSafari",l(k[1]));t.iPad&&q.set("mobileSafari",
"0.0");if(q.ie)if(document.documentMode)document.documentMode!==Math.floor(q.ie)&&q.set("ie",l(document.documentMode));else document.documentMode=Math.floor(q.ie);u={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0,set:function(o,p){this.name=o;this.version=p;this[o]=p}};(k=r.match(/trident\/([\d.]+)/))?u.set("trident",l(k[1])):(k=r.match(/gecko\/([\d.]+)/))?u.set("gecko",l(k[1])):(k=r.match(/applewebkit\/([\d.]+)/))?u.set("webkit",l(k[1])):(k=r.match(/presto\/([\d.]+)/))&&u.set("presto",
l(k[1]));if(q.ie)if(q.ie==6)u.set("trident",l("4"));else if(q.ie==7||q.ie==8)u.set("trident",l("5"));if(j.browserOptions.adjustBehaviors)if(q.ie&&q.ie<7)try{document.execCommand("BackgroundImageCache",false,true)}catch(v){}var s=function(o){return String(o).replace(/\./gi,"_")};k=function(){var o=document.documentElement,p=[o.className];p.push("javascriptEnabled");p.push(t.name);p.push(t.name+s(t.version));p.push(q.name);p.push(q.name+s(q.version));document.documentMode&&p.push("documentMode_"+document.documentMode);
p.push(u.name);p.push(u.name+s(u.version));if(q.plugins.flash){p.push("flash");p.push("flash"+s(q.plugins.flash))}typeof window.webTop!="undefined"&&window.webTop&&p.push("webTop");o.className=p.join(" ")};j.browserOptions.htmlClass&&k();j.platform=t;j.browser=q;j.browser.engine=u});
Jx().$package(function(j){var f,r,x,t,q,u,l,k,v,s,o,p,a,b,e,c,g=null,i,m,y,A;j.dom=j.dom||{};f=j.dom;r=j.browser;x=f.win?f.win.contentWindow:f.win||window;f.win=x;f.doc=x.document;var w=document&&Object.prototype.hasOwnProperty.call(document.documentElement,"classList");m=function(){if(y)return y;return y=document.compatMode==="CSS1Compat"?document.documentElement:document.body};c=function(d){if(d){d=d||window.document;g=d.nodeType===9?d:d.ownerDocument||f.doc}else if(!g){d=d||window.document;g=d.nodeType===
9?d:d.ownerDocument||f.doc}return g};i=function(d){var h=c(d);return d.document?d:h.defaultView||h.parentWindow||f.win};x=function(d,h){h=h||c();return h.getElementsByTagName(d)};o=function(d){return(d?d.scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))||0};p=function(d){return(d?d.scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop))||0};t=function(){return w?function(d,h){if(!d||!h)return false;return d.classList.contains(h)}:function(d,
h){if(!d||!h)return false;return-1<(" "+d.className+" ").indexOf(" "+h+" ")}}();q=function(){return w?function(d,h){!d||!h||t(d,h)||d.classList.add(h)}:function(d,h){!d||!h||t(d,h)||(d.className+=" "+h)}}();u=function(){return w?function(d,h){!d||!h||!t(d,h)||d.classList.remove(h)}:function(d,h){if(!(!d||!h||!t(d,h)))d.className=d.className.replace(RegExp("(?:^|\\s)"+h+"(?:\\s|$)")," ")}}();l=function(){return w?function(d,h){d&&h&&d.classList.toggle(h)}:function(d,h){if(d&&h)t(d,h)?u(d,h):q(d,h)}}();
k=function(d,h,n){if(d){var z=j.browser.name;if(h==="float"||h==="cssFloat")h=z==="ie"?"styleFloat":"cssFloat";if(h==="opacity"&&z==="ie"&&j.browser.ie<9){d.style.filter='alpha(opacity="'+n*100+'")';if(!d.style.zoom)d.style.zoom=1}else d.style[h]=n}};v=function(d,h){if(d){var n=i(d),z=j.browser.name;if(h==="float"||h==="cssFloat")h=z==="ie"?"styleFloat":"cssFloat";if(h==="opacity"&&z==="ie"&&j.browser.ie<9){n=1;if((z=d.style.filter.match(/opacity=(\d+)/))&&z[1])n=z[1]/100;return n}if(d.style[h])return d.style[h];
else if(d.currentStyle)return d.currentStyle[h];else if(n.getComputedStyle)return n.getComputedStyle(d,null)[h];else if(document.defaultView&&document.defaultView.getComputedStyle){h=h.replace(/([/A-Z])/g,"-$1");h=h.toLowerCase();return(n=document.defaultView.getComputedStyle(d,""))&&n.getPropertyValue(h)}}};s=function(d,h){d.style.cssText=h};a=function(d){var h=0,n=0;if(d)if(document.documentElement.getBoundingClientRect&&d.getBoundingClientRect){n={left:0,top:0,right:0,bottom:0};try{n=d.getBoundingClientRect()}catch(z){return[0,
0]}d=d.ownerDocument;var B=j.browser.ie?2:0;h=n.top-B+p(d);n=n.left-B+o(d)}else for(;d.offsetParent;){h+=d.offsetTop;n+=d.offsetLeft;d=d.offsetParent}return[n,h]};b=function(d){d=a(d);d[0]+=o();d[1]+=p();return d};e=function(d,h,n){var z=parseInt(v(d,"marginLeft"))||0,B=parseInt(v(d,"marginTop"))||0;k(d,"left",parseInt(h)-z+"px");k(d,"top",parseInt(n)-B+"px")};for(var E=function(d){return!d||d=="auto"?0:parseInt(d.substr(0,d.length-2))},C=x("script"),D=0;D<C.length;D++)if(C[D].getAttribute("hasJx")==
"true")j.src=C[D].src;if(!j.src)j.src=C[C.length-1].src;j.filename=j.src.replace(/(.*\/){0,}([^\\]+).*/ig,"$2");j.path=j.src.split(j.filename)[0];f.getDoc=c;f.id=function(d,h){return c(h).getElementById(d)};f.name=function(d,h){return c(h).getElementsByName(d)};f.tagName=x;f.getText=function(d){var h=d?d[TEXT_CONTENT]:"";if(h===UNDEFINED&&INNER_TEXT in d)h=d[INNER_TEXT];return h||""};f.getAttributeByParent=function(d,h,n){var z=false;h=h;var B;do{B=h.getAttribute(d);if(j.isUndefined(B)||j.isNull(B))if(h===
n)z=true;else h=h.parentNode;else z=true}while(!z);return B};f.node=function(d,h){var n,z=document.createElement(d),B={"class":function(){z.className=h["class"]},style:function(){s(z,h.style)}};for(n in h)B[n]?B[n]():z.setAttribute(n,h[n]);return z};f.setClass=function(d,h){d.className=h};f.getClass=function(d){return d.className};f.hasClass=t;f.addClass=q;f.removeClass=u;f.toggleClass=l;f.replaceClass=function(d,h,n){u(d,h);q(d,n)};f.createStyleNode=function(d,h){var n=f.node("style",{id:h||"",type:"text/css"});
if(n.styleSheet)n.styleSheet.cssText=d;else{var z=document.createTextNode(d);n.appendChild(z)}f.getDocHead().appendChild(n);return n};f.setStyle=k;f.getStyle=v;f.setCssText=s;f.getCssText=function(d){return d.style.cssText};f.addCssText=function(d,h){d.style.cssText+=";"+h};f.show=function(d,h){var n;n=(n=d.getAttribute("_oldDisplay"))?n:v(d,"display");if(h)k(d,"display",h);else n==="none"?k(d,"display","block"):k(d,"display",n)};f.isShow=function(d){return v(d,"display")==="none"?false:true};f.recover=
function(d){var h;h=(h=d.getAttribute("_oldDisplay"))?h:v(d,"display");h==="none"?k(d,"display",""):k(d,"display",h)};f.hide=function(d){var h=v(d,"display");d.getAttribute("_oldDisplay")||(h==="none"?d.setAttribute("_oldDisplay",""):d.setAttribute("_oldDisplay",h));k(d,"display","none")};f.getScrollLeft=o;f.getScrollTop=p;f.getScrollHeight=function(d){return(d?d.scrollHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))||0};f.getScrollWidth=function(d){return(d?d.scrollWidth:
Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))||0};f.getClientHeight=function(d){d=d||m();return d.clientHeight};f.getClientWidth=function(d){d=d||m();return d.clientWidth};f.getOffsetHeight=function(d){d=d||m();return d.offsetHeight};f.getOffsetWidth=function(d){d=d||m();return d.offsetWidth};f.getClientXY=a;f.setClientXY=function(d,h,n){h=parseInt(h)+o();n=parseInt(n)+p();e(d,h,n)};f.getXY=b;f.setXY=e;f.getRelativeXY=function(d,h){var n=b(d),z=b(h),B=[];B[0]=n[0]-z[0];
B[1]=n[1]-z[1];return B};f.getPosX=function(d){return E(f.getStyle(d,"left"))};f.getPosY=function(d){return E(f.getStyle(d,"top"))};f.getWidth=function(d){return E(f.getStyle(d,"width"))};f.getHeight=function(d){return E(f.getStyle(d,"height"))};f.getSelection=void 0;f.getSelectionText=function(d){d=d||window;var h=d.document;if(d.getSelection)return d.getSelection().toString();else if(h.getSelection)return h.getSelection();else if(h.selection)return h.selection.createRange().text};f.getTextFieldSelection=
function(d){return d.selectionStart!=undefined&&d.selectionEnd!=undefined?d.value.substring(d.selectionStart,d.selectionEnd):""};f.getDocumentElement=m;f.getDocHead=function(){if(!A){var d=c();A=d.getElementsByTagName("head")?d.getElementsByTagName("head")[0]:d.documentElement}return A};f.contains=function(d,h,n){if(!n&&d===h)return false;if(d.compareDocumentPosition){d=d.compareDocumentPosition(h);if(d==20||d==0)return true}else if(d.contains(h))return true;return false};f.getHref=function(d){return(r.ie&&
r.ie<=7?d.getAttribute("href",4):d.href)||null}});
Jx().$package(function(j){var f,r,x,t,q,u,l=[],k,v,s,o,p;j.event=j.event||{};f=j.event;p=function(a,b){if(!a)a=window.event;b=b||a.srcElement;var e=document,c=e.documentElement;e=e.body;c={_event:a,type:a.type,target:a.srcElement,currentTarget:b,relatedTarget:a.fromElement?a.fromElement:a.toElement,eventPhase:a.srcElement==b?2:3,clientX:a.clientX,clientY:a.clientY,screenX:a.screenX,screenY:a.screenY,layerX:a.offsetX,layerY:a.offsetY,pageX:a.clientX+(c&&c.scrollLeft||e&&e.scrollLeft||0)-(c&&c.clientLeft||
e&&e.clientLeft||0),pageY:a.clientY+(c&&c.scrollTop||e&&e.scrollTop||0)-(c&&c.clientTop||e&&e.clientTop||0),wheelDelta:a.wheelDelta,altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,charCode:a.keyCode,keyCode:a.keyCode,stopPropagation:function(){this._event.cancelBubble=true},preventDefault:function(){this._event.returnValue=false}};e=a.type.toLowerCase();if(e=="mouseover")c.relatedTarget=a.fromElement;else if(e=="mouseout")c.relatedTarget=a.toElement;if(!j.isUndefined(a.button)){e=a.button;var g=
{0:-1,1:0,2:2,3:-1,4:1};c.button=j.isUndefined(g[e])?e:g[e]}return c};if(j.browser.ie){r=function(a,b,e,c){u["on"+b]?u["on"+b](a,b,e,c):x(a,b,e)};x=function(a,b,e){if(f._find(arguments)==-1){var c=function(m){m=p(m,a);if(Function.prototype.call)e.call(a,m);else{a._currentHandler=e;a._currentHandler(m);a._currentHandler=null}};a.attachEvent("on"+b,c);c={element:a,eventType:b,handler:e,wrappedEvent:c};var g=(a.document||a).parentWindow||window,i=f._uid();if(!g._allHandlers)g._allHandlers={};g._allHandlers[i]=
c;if(!a._handlers)a._handlers=[];a._handlers.push(i);if(!g._onunloadEventRegistered){g._onunloadEventRegistered=true;g.attachEvent("onunload",f._removeAllEvents)}}};t=function(a,b,e){if(u["off"+b])u["off"+b](a,b,e);else arguments.length==3?q(a,b,e):q(a,b)};q=function(a){var b=f._find(arguments);if(b!=-1){for(var e=(a.document||a).parentWindow||window,c=0;c<b.length;c++){var g=b[c],i=a._handlers[g],m=e._allHandlers[i];a.detachEvent("on"+m.eventType,m.wrappedEvent);a._handlers[g]=null;a._handlers.splice(g,
1);delete e._allHandlers[i]}if(a._handlers&&a._handlers.length==0)a._handlers=null}};f._find=function(a){var b=a[0],e=a[1],c=a[2],g=b._handlers;if(!g)return-1;b=(b.document||b).parentWindow||window;var i=[];if(a.length===3)for(a=g.length-1;a>=0;a--){var m=g[a];m=b._allHandlers[m];if(m.eventType==e&&m.handler==c){i.push(a);return i}}else if(a.length===2){for(a=g.length-1;a>=0;a--){m=g[a];m=b._allHandlers[m];m.eventType==e&&i.push(a)}if(i.length>0)return i}else if(a.length===1){for(a=g.length-1;a>=
0;a--)i.push(a);if(i.length>0)return i}return-1};f._removeAllEvents=function(){for(var a in this._allHandlers){var b=this._allHandlers[a];b.element.detachEvent("on"+b.eventType,b.wrappedEvent);b.element._handlers=null;delete this._allHandlers[a]}};f._counter=0;f._uid=function(){return"h"+f._counter++}}else if(document.addEventListener){r=function(a,b,e,c){u["on"+b]?u["on"+b](a,b,e,c):x(a,b,e)};x=function(a,b,e){var c=false;a||j.out("targetModel undefined:"+b+e);if(!a._eventTypes)a._eventTypes={};
a._eventTypes[b]||(a._eventTypes[b]=[]);a.addEventListener(b,e,false);a=a._eventTypes[b];for(b=0;b<a.length;b++)if(a[b]==e){c=true;break}c||a.push(e)};t=function(a,b,e){if(u["off"+b])u["off"+b](a,b,e);else arguments.length==3?q(a,b,e):q(a,b)};q=function(a,b,e){if(b)if(arguments.length==3){if(e){a.removeEventListener(b,e,false);if(a._eventTypes&&a._eventTypes[b])for(var c=a._eventTypes[b],g=0;g<c.length;g++)if(c[g]===e){c[g]=null;c.splice(g,1);break}}}else{if(a._eventTypes&&a._eventTypes[b]){c=a._eventTypes[b];
for(g=0;g<c.length;g++)a.removeEventListener(b,c[g],false);a._eventTypes[b]=[]}}else if(a._eventTypes){var i=a._eventTypes,m;for(m in i){c=a._eventTypes[m];for(g=0;g<c.length;g++)a.removeEventListener(m,c[g],false)}}}}u={ondrag:function(a,b,e){var c,g,i=false,m=function(w){if(!(!j.browser.mobileSafari&&w.button!==0)){if(j.browser.mobileSafari){w.stopPropagation();w=w.touches[0];c=w.pageX;g=w.pageY}else{w.stopPropagation();w.preventDefault();c=w.clientX;g=w.clientY}i=false;if(j.browser.mobileSafari){f.addEventListener(document,
"touchmove",y);f.addEventListener(a,"touchend",A)}else f.addEventListener(document,"mousemove",y)}},y=function(w){if(!(!j.browser.mobileSafari&&w.button!==0)){var E,C;w.stopPropagation();if(j.browser.mobileSafari){C=w.changedTouches[0];E=C.pageX;C=C.pageY}else{E=w.clientX;C=w.clientY}if(Math.abs(c-E)+Math.abs(g-C)>2){if(j.browser.mobileSafari){f.removeEventListener(document,"touchmove",y);f.removeEventListener(a,"touchend",A)}else f.removeEventListener(document,"mousemove",y);if(!i){e.call(a,w);i=
true}}}},A=function(w){if(!(!j.browser.mobileSafari&&w.button!==0))if(j.browser.mobileSafari){f.removeEventListener(document,"touchmove",y);if(i){w.stopPropagation();w.preventDefault()}}else f.removeEventListener(document,"mousemove",y)};if(j.browser.mobileSafari)f.addEventListener(a,"touchstart",m);else{f.addEventListener(a,"mousedown",m);f.addEventListener(a,"mouseup",A)}l.push({element:a,eventType:b,handler:e,actions:[m,A]})},offdrag:function(a,b,e){for(var c in l)if(l[c].handler==e&&l[c].element==
a&&l[c].eventType==b){if(j.browser.mobileSafari){f.removeEventListener(a,"touchstart",l[c].actions[0]);f.removeEventListener(a,"touchend",l[c].actions[1])}else{f.removeEventListener(a,"mousedown",l[c].actions[0]);f.removeEventListener(a,"mouseup",l[c].actions[1])}l.splice(c,1);break}},oncustomclick:function(a,b,e,c){var g,i,m=false,y=false,A;c=c?c:{};var w=c.longtouchable,E=-1;c=function(h){m=false;if(!(!j.browser.mobileSafari&&h.button!==0)){var n;if(j.browser.mobileSafari){n=h.changedTouches[0];
g=n.pageX;i=n.pageY}else{g=h.clientX;i=h.clientY}y=false;if(w)A=setTimeout(function(){if(!(m||y)){if(j.browser.mobileSafari){f.removeEventListener(a,"touchmove",D);f.removeOriginalEventListener(a,"touchend",d)}else{f.removeEventListener(a,"mousemove",D);f.removeOriginalEventListener(a,"click",d)}e.call(a,h,2E3)}},1E3);if(j.browser.mobileSafari){f.addEventListener(a,"touchmove",D);f.addOriginalEventListener(a,"touchend",d)}else{f.addEventListener(a,"mousemove",D);f.addOriginalEventListener(a,"click",
d)}}};var C=function(h){E=h.button;if(!(!j.browser.mobileSafari&&h.button!==0))if(j.browser.mobileSafari)touch=h.changedTouches[0]},D=function(h){if(j.browser.mobileSafari){touch=h.changedTouches[0];var n=touch.pageX;h=touch.pageY}else{n=h.clientX;h=h.clientY}if(m=Math.abs(g-n)+Math.abs(i-h)>1){clearTimeout(A);A=null;if(j.browser.mobileSafari){f.removeEventListener(a,"touchmove",D);f.removeOriginalEventListener(a,"touchend",d)}else{f.removeEventListener(a,"mousemove",D);f.removeOriginalEventListener(a,
"click",d)}}},d=function(h){clearTimeout(A);A=null;y=true;if(!(!j.browser.mobileSafari&&E!==0)){var n;if(j.browser.mobileSafari){n=h.changedTouches[0];var z=n.pageX;n=n.pageY}else{z=h.clientX;n=h.clientY}if(Math.abs(g-z)+Math.abs(i-n)<1){m=false;e.call(a,h,0)}}};if(j.browser.mobileSafari)f.addEventListener(a,"touchstart",c);else{f.addEventListener(a,"mousedown",c);f.addEventListener(a,"mouseup",C)}l.push({element:a,eventType:b,handler:e,actions:[c,D,C,d]})},offcustomclick:function(a,b,e){for(var c in l)if(l[c].handler==
e&&l[c].element==a&&l[c].eventType==b){if(j.browser.mobileSafari){f.removeEventListener(a,"touchstart",l[c].actions[0]);f.removeEventListener(a,"touchmove",l[c].actions[1]);f.removeOriginalEventListener(a,"touchend",l[c].actions[3])}else{f.removeEventListener(a,"mousedown",l[c].actions[0]);f.removeEventListener(a,"mousemove",l[c].actions[1]);f.removeEventListener(a,"mouseup",l[c].actions[2]);f.removeOriginalEventListener(a,"click",l[c].actions[3])}l.splice(c,1);break}},oncontextmenu:function(a,b,
e){if(j.browser.ie==9){var c=function(g){g=p(g,a);e.call(a,g)};a.attachEvent("oncontextmenu",c);l.push({element:a,eventType:b,handler:e,actions:[c]})}else f.addOriginalEventListener(a,b,e)},offcontextmenu:function(a,b,e){if(j.browser.ie==9)for(var c in l){if(l[c].handler==e&&l[c].element==a&&l[c].eventType==b){a.detachEvent("oncontextmenu",l[c].actions[0]);l.splice(c,1);break}}else f.removeOriginalEventListener(a,b,e)},onmousewheel:function(a,b,e){if(j.browser.firefox){var c=function(g){g.wheelDelta=
-40*g.detail;e.call(a,g)};f.addOriginalEventListener(a,"DOMMouseScroll",c);l.push({element:a,eventType:b,handler:e,actions:[c]})}else f.addOriginalEventListener(a,"mousewheel",e)},offmousewheel:function(a,b,e){if(j.browser.firefox)for(var c in l){if(l[c].handler==e&&l[c].element==a&&l[c].eventType==b){f.removeOriginalEventListener(a,"DOMMouseScroll",l[c].actions[0]);l.splice(c,1);break}}else f.removeOriginalEventListener(a,"mousewheel",e)},onmouseenter:function(a,b,e){var c=function(g){var i=g.relatedTarget;
if(i)if(this.compareDocumentPosition){var m=this.compareDocumentPosition(i);i==this||m==20||m==0||e.call(this,g)}else i==this||this.contains(i)||e.call(this,g);else e.call(this,g)};f.addEventListener(a,"mouseover",c);l.push({element:a,eventType:b,handler:e,actions:[c]})},offmouseenter:function(a,b,e){for(var c in l)if(l[c].handler==e&&l[c].element==a&&l[c].eventType==b){f.removeEventListener(a,"mouseover",l[c].actions[0]);l.splice(c,1);break}},onmouseleave:function(a,b,e){var c=function(g){var i=
g.relatedTarget;if(i)if(this.compareDocumentPosition){i=this.compareDocumentPosition(i);i==20||i==0||e.call(this,g)}else this.contains(i)||e.call(this,g);else e.call(this,g)};f.addEventListener(a,"mouseout",c);l.push({element:a,eventType:b,handler:e,actions:[c]})},offmouseleave:function(a,b,e){for(var c in l)if(l[c].handler==e&&l[c].element==a&&l[c].eventType==b){f.removeEventListener(a,"mouseout",l[c].actions[0]);l.splice(c,1);break}},oninput:function(a,b,e){if(j.browser.ie){var c=function(g){if(g.propertyName.toLowerCase()==
"value"){g=p(g,a);e.call(a,g)}};a.attachEvent("onpropertychange",c);l.push({element:a,eventType:b,handler:e,actions:[c]});j.browser.ie==9&&f.addOriginalEventListener(a,"change",e)}else f.addOriginalEventListener(a,"input",e)},offinput:function(a,b,e){if(j.browser.ie){for(var c in l)if(l[c].handler==e&&l[c].element==a&&l[c].eventType==b){a.detachEvent("onpropertychange",l[c].actions[0]);l.splice(c,1);break}j.browser.ie==9&&f.removeOriginalEventListener(a,"change",e)}else f.removeOriginalEventListener(a,
"input",e)}};k=function(a){if(k.done)return a();if(k.timer)k.ready.push(a);else{k.ready=[a];f.on(window,"load",v);k.timer=window.setInterval(v,300)}};v=function(){if(k.done)return true;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){k.done=true;window.clearInterval(k.timer);k.timer=null;for(var a=0;a<k.ready.length;a++)k.ready[a]();k.ready=null;return true}};s=function(){this.subscribers=[]};s.prototype.subscribe=function(a){j.array.some(this.subscribers,function(b){return b===
a})||this.subscribers.push(a);return a};s.prototype.deliver=function(a){j.array.forEach(this.subscribers,function(b){b(a)})};s.prototype.unsubscribe=function(a){this.subscribers=j.array.filter(this.subscribers,function(b){return b!==a});return a};o=function(a,b,e){var c,g;if(e){b="on"+b;if(!a._$events)a._$events={};if(a._$events[b]){if(a._$events[b].length==0)a._$events[b]=[]}else a._$events[b]=[];a=a._$events[b];b=a.length;c=-1;for(g=0;g<b;g++)if(a[g]==e){c=g;break}c===-1&&a.push(e)}else j.out(">>> \u6dfb\u52a0\u7684\u89c2\u5bdf\u8005\u65b9\u6cd5\u4e0d\u5b58\u5728\uff1a"+
a+b+e)};f.addEventListener=r;f.removeEventListener=t;f.addOriginalEventListener=x;f.removeOriginalEventListener=q;f.on=f.addEventListener;f.off=f.removeEventListener;f.onDomReady=k;f.Publish=s;f.addObserver=o;f.addObservers=function(a){var b=a.targetModel;a=a.eventMapping;for(var e in a)o(b,e,a[e])};f.notifyObservers=function(a,b,e){var c;b="on"+b;var g=true;if(a._$events&&a._$events[b]){b=a._$events[b];if(b.length>0)for(c=0;c<b.length;c++)if(b[c].apply(a,[e])===false)g=false}return g};f.removeObserver=
function(a,b,e){var c,g=false,i,m=a._$events;if(e){if(m){b="on"+b;if(a=m[b]){i=a.length;for(c=0;c<i;c++)if(a[c]==e){a[c]=null;a.splice(c,1);g=true;break}}}}else if(b){if(m){b="on"+b;if(a=m[b]){i=a.length;for(c=0;c<i;c++)a[c]=null;delete m[b];g=true}}}else if(a)if(m){for(c in m)delete m[c];delete a._$events;g=true}return g}});
